!function(i){"use strict";i(document).on("click",".vi-wpvs-variation-style",function(t){i(".vi-wpvs-variation-wrap-option-available").remove(),i(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show"),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}),i(document).on("click","body",function(t){i(".vi-wpvs-variation-wrap-option-available").remove(),i(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show")}),i(document).on("click",".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap",function(t){if(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),i(this).hasClass("vi-wpvs-option-wrap-disable"))return!1;let a=i(".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap").index(i(this));i(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show").find(".vi-wpvs-option-wrap").eq(a).trigger("click"),i(".vi-wpvs-variation-wrap-option-available").remove()}),i(document).on("mouseenter",".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap",function(t){i(this).hasClass("vi-wpvs-option-wrap-selected")||i(this).hasClass("vi-wpvs-option-wrap-disable")||i(this).hasClass("vi-wpvs-product-link")||i(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-hover")}),i(document).on("mouseleave",".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap",function(t){i(this).hasClass("vi-wpvs-option-wrap-selected")||i(this).hasClass("vi-wpvs-option-wrap-disable")||i(this).removeClass("vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default")});function t(){if(!i(".vi_wpvs_variation_form:not(.vi_wpvs_variation_form_init),.variations_form:not(.vi_wpvs_variation_form),.variations_form:not(.vi_wpvs_variation_form_init)").length)return setTimeout(function(){t()},100),!1;i(".vi_wpvs_variation_form:not(.vi_wpvs_variation_form_init)").each(function(){i(this).addClass("vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()}),i(".variations_form:not(.vi_wpvs_variation_form),.variations_form:not(.vi_wpvs_variation_form_init)").each(function(){if(i(this).find(".composited_product_details_wrapper").length)return!0;i(this).addClass("vi_wpvs_variation_form vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()}),i(".composited_product_details_wrapper .variations:not(.vi_wpvs_variation_form), .composited_product_details_wrapper .variations:not(.vi_wpvs_variation_form_init)").each(function(){i(this).addClass("vi_wpvs_variation_form vi_wpvs_variation_form_init viwpvs_variation_form_refresh"),i(this).closest(".variations_form").viwpvs_woo_product_variation_swatches()}),vi_wpvs_frontend_param.wjecf_wc_discounts&&vi_wpvs_frontend_param.is_checkout&&i(".variations").each(function(){i(this).addClass("vi_wpvs_variation_form vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()})}i(document).on(["ajaxComplete","woodmart-quick-view-displayed","wc-composite-component-loaded","wc_variation_form","flatsome-flickity-ready","woosq_loaded","tc_product_variation_form"].join(" "),function(i){setTimeout(function(){t()},200)}),i(document).on("vi_wpvs_variation_form",function(){t()}),i(document).ready(function(){t()}),i(window).on("load",function(){t()}),window.viwpvs_frontend=function(i){this.form=i,this.viwpvs_form_id=Date.now(),this.variationData=i.data("product_variations"),this.init()},viwpvs_frontend.prototype.init=function(){let t=this,a=this.form,o=this.variationData,s=this.viwpvs_form_id;a.data("viwpvs_form_id",s),o&&a.find(".vi-wpvs-option-wrap.vi-wpvs-option-wrap-selected").length&&a.find(".vi-wpvs-option-wrap.vi-wpvs-option-wrap-selected").length===a.find(".vi-wpvs-select-attribute select").length&&(a.addClass("vi_wpvs_variation_form_has_selected"),a.on("hide_variation viwpvs_hide_variation tc_hide_variation",function(){a.hasClass("vi_wpvs_variation_form_has_selected")&&(a.removeClass("vi_wpvs_variation_form_has_selected"),t.hide_variation())})),a.on("woocommerce_update_variation_values tc_update_variation_values",function(i){t.select_variation_item()}),t.design_variation_item(),a.find(".vi-wpvs-variation-wrap-select-wrap").length&&a.find(".vi-wpvs-variation-wrap-select-wrap").each(function(a,o){if(!t.is_item_in_form(o,s))return!0;let e,v;i(o).parent().parent().parent().css({width:"100%"}),e=i(o).find(".vi-wpvs-variation-wrap-option"),e.attr("data-offset_height")||e.attr("data-offset_height",e.outerHeight()).removeClass("vi-wpvs-select-hidden").addClass("vi-wpvs-hidden"),v=i(o).find(".vi-wpvs-variation-button-select"),e.find(".vi-wpvs-option-wrap-selected").length&&v.find("span").html(e.find(".vi-wpvs-option-wrap-selected .vi-wpvs-option-select").html()),v.on("click",function(t){if(t.preventDefault(),t.stopPropagation(),!e.hasClass("vi-wpvs-variation-wrap-option-render"))if(e.hasClass("vi-wpvs-variation-wrap-option-show"))i(".vi-wpvs-variation-wrap-option-available").remove(),e.removeClass("vi-wpvs-variation-wrap-option-show");else{let t,a,s,v;e.addClass("vi-wpvs-variation-wrap-option-render"),t=parseFloat(e.attr("data-offset_height")),a=i(window).scrollTop(),s=i(window).outerHeight(),v=i(this).offset().top-a,i(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show"),e.addClass("vi-wpvs-variation-wrap-option-show"),i(".vi-wpvs-variation-wrap-option-available").remove();let n=i(o).closest(".vi-wpvs-variation-wrap").clone();n.find(".vi-wpvs-variation-button-select").remove(),n.find(".vi-wpvs-variation-wrap-option").removeClass("vi-wpvs-hidden vi-wpvs-variation-wrap-option-show"),n.addClass("vi-wpvs-variation-wrap-option-available").css({width:i(this).outerWidth(),left:i(this).offset().left}),a>v||a<t||s>v+t+40?(n.toggleClass("vi-wpvs-variation-wrap-select-bottom"),n.css({top:i(this).offset().top+i(this).outerHeight()})):(n.toggleClass("vi-wpvs-variation-wrap-select-top"),n.css({top:i(this).offset().top-e.outerHeight()})),setTimeout(function(i){i.removeClass("vi-wpvs-variation-wrap-option-render")},500,e),i("body").append(n)}})}),a.find(".vi-wpvs-option-wrap").each(function(o,e){if(!t.is_item_in_form(e,s))return!0;let v,n,p,r;v=i(e).closest(".vi-wpvs-variation-wrap-wrap"),n=v.find("select.vi-wpvs-select-attribute"),0===n.length&&(n=v.find(".vi-wpvs-select-attribute select").eq(0)),n.find("option").removeClass("vi-wpvs-option-disabled"),i(e).on("mouseenter",function(){i(this).hasClass("vi-wpvs-option-wrap-selected")||i(this).hasClass("vi-wpvs-option-wrap-disable")||i(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-hover")}).on("mouseleave",function(){i(this).hasClass("vi-wpvs-option-wrap-selected")||i(this).hasClass("vi-wpvs-option-wrap-disable")||i(this).removeClass("vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default")}).on("click",function(t){if(t.stopPropagation(),i(this).hasClass("vi-wpvs-option-wrap-disable"))return t.preventDefault(),t.stopPropagation(),!1;i(this).parent().hasClass("vi-wpvs-variation-wrap-radio")||(t.preventDefault(),t.stopPropagation()),i(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),a.find(".reset_variations").removeClass("vi-wpvs-hidden"),v.find(".vi-wpvs-option-wrap").removeClass("vi-wpvs-option-wrap-selected vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default"),v.find(".vi-wpvs-variation-wrap").hasClass("vi-wpvs-variation-wrap-select")&&v.find(".vi-wpvs-variation-button-select >span ").html(i(this).find(".vi-wpvs-option-select").html()),i(this).find(".vi-wpvs-option-radio").length>0&&(v.find(".vi-wpvs-option-radio").prop("checked",!1),i(this).find(".vi-wpvs-option-radio").prop("checked",!0),i(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected")),p=viwpvs_to_string(n.val()),r=viwpvs_to_string(i(this).data("attribute_value")),r!==p?(i(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected"),n.val(r).trigger("change")):i(this).parent().hasClass("vi-wpvs-variation-wrap-radio")||(a.hasClass("vi_wpvs_loop_variation_form")?a.data("wpvs_double_click")?n.val("").trigger("change"):i(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected"):v.data("wpvs_double_click")?n.val("").trigger("change"):i(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected")),t.stopPropagation()})}),a.find("select:not(.vi-wpvs-select-attribute):not(.vi-wpvs-variation-style-select)").on("change",function(){setTimeout(function(){t.select_variation_item()},500)}),a.find(".reset_variations,.tc-epo-element-variable-reset-variations").on("click",function(){t.select_variation_item(),t.hide_variation()})},viwpvs_frontend.prototype.design_variation_item=function(){let t=this.form,a=this.viwpvs_form_id,o=this;t.find(".vi-wpvs-variation-wrap-wrap").each(function(t,s){if(!o.is_item_in_form(s,a))return!0;let e=i(this),v=e.parent().parent();e.parent().addClass("vi-wpvs-variation-style-content"),e.find(`div.vi-wpvs-select-attribute select[data-attribute_name="${e.data("wpvs_attribute_name")}"]`).addClass("vi-wpvs-select-attribute"),vi_wpvs_frontend_param.wjecf_wc_discounts&&vi_wpvs_frontend_param.is_checkout||v.addClass(e.data("display_type")),e.data("wpvs_attr_title")||v.find(".label").addClass("vi-wpvs-hidden")}),t.find(".vi-wpvs-option.vi-wpvs-option-color").each(function(t,s){if(!o.is_item_in_form(s,a))return!0;let e=i(s).data("option_color");i(s).css({background:e})}),t.find(".vi-wpvs-variation-wrap-wrap").each(function(t,s){if(!o.is_item_in_form(s,a))return!0;i(s).removeClass("vi-wpvs-hidden")})},viwpvs_frontend.prototype.select_variation_item=function(){let t=this.form,a=this.variationData,o=this.viwpvs_form_id,s=this;t.find(".vi-wpvs-label-selected").each(function(t,a){if(!s.is_item_in_form(a,o))return!0;i(a).addClass("vi-wpvs-hidden")}),t.find(".vi-wpvs-option-wrap-out-of-stock").each(function(t,a){if(!s.is_item_in_form(a,o))return!0;i(a).removeClass("vi-wpvs-option-wrap-out-of-stock")}),t.find(".vi-wpvs-variation-wrap-wrap").each(function(e,v){if(!s.is_item_in_form(v,o))return!0;let n=i(v);if(n.data("hide_outofstock")){let t=i(v).find("select option:not(.vi-wpvs-option-disabled)").map(function(){return i(this).val()});i(v).find(".vi-wpvs-option-wrap:not(.vi-wpvs-product-link)").each(function(a,o){let s=viwpvs_to_string(i(o).data("attribute_value"));i.inArray(s,t)>-1?i(o).removeClass("vi-wpvs-option-wrap-disable"):i(o).removeClass("vi-wpvs-option-wrap-selected").addClass("vi-wpvs-option-wrap-default vi-wpvs-option-wrap-disable")})}else{let o=i(v).find("select option:not(.vi-wpvs-option-disabled)").map(function(){return i(this).val()});if(i(v).find(".vi-wpvs-option-wrap:not(.vi-wpvs-product-link)").each(function(t,a){let s=viwpvs_to_string(i(a).data("attribute_value"));i.inArray(s,o)>-1?i(a).removeClass("vi-wpvs-hidden"):i(a).removeClass("vi-wpvs-option-wrap-selected").addClass("vi-wpvs-option-wrap-default vi-wpvs-hidden")}),a){let o="viwpvs_default"===n.data("swatch_type")?n.find(`select[name="${n.data("wpvs_attribute_name")}"]`):n.find("select.vi-wpvs-select-attribute"),s=viwpvs_to_string(o.data("attribute_name")),e=o.val();if(!n.hasClass("vi-wpvs-option-wrap-out-of-stock-attribute-checked")){n.find(".vi-wpvs-variation-wrap").find(".vi-wpvs-option-wrap").each(function(){let t=i(this),o=viwpvs_to_string(t.data("attribute_value"));if(o){let i=0,e=0;for(let t in a)if(a.hasOwnProperty(t)){let v=a[t];null!==v.attributes&&void 0!==v.attributes&&(""===v.attributes[s]?(i++,(v.hasOwnProperty("is_purchasable")&&!v.is_purchasable||v.hasOwnProperty("is_in_stock")&&!v.is_in_stock||v.hasOwnProperty("viwpvs_not_available"))&&e++):viwpvs_to_string(v.attributes[s])===o&&(i++,v.hasOwnProperty("viwpvs_not_available")&&e++))}i===e&&t.addClass("vi-wpvs-option-wrap-out-of-stock-attribute")}}),n.addClass("vi-wpvs-option-wrap-out-of-stock-attribute-checked")}if(e)for(let o in a)if(a.hasOwnProperty(o)){let v=a[o];if(v.attributes[s]===e&&v.hasOwnProperty("viwpvs_not_available"))for(let o in v.attributes){let n=v.attributes[o];if(o!==s){t.find(`.vi-wpvs-variation-wrap[data-attribute="${o}"]`).find(".vi-wpvs-option-wrap").each(function(){let t=i(this);if(!t.hasClass("vi-wpvs-option-wrap-out-of-stock-attribute")&&!t.hasClass("vi-wpvs-option-wrap-out-of-stock")&&viwpvs_to_string(t.data("attribute_value"))===n){let i=!0;for(let v in a)if(a.hasOwnProperty(v)){let n=a[v];if(n.attributes[s]===e&&n.attributes[o]===viwpvs_to_string(t.data("attribute_value"))&&!n.hasOwnProperty("viwpvs_not_available")){i=!1;break}}return i&&t.addClass("vi-wpvs-option-wrap-out-of-stock"),!1}})}}}}}if(i(v).data("show_selected_item")&&i(v).find(".vi-wpvs-option-wrap-selected").length&&i(v).find(".vi-wpvs-option-wrap-selected").data("attribute_label"))if(i(v).parent().parent().find(".vi-wpvs-label-selected").length)i(v).parent().parent().find(".vi-wpvs-label-selected.vi-wpvs-label-selected-title").html(i(v).find(".vi-wpvs-option-wrap-selected").data("attribute_label")),i(v).parent().parent().find(".vi-wpvs-label-selected").removeClass("vi-wpvs-hidden");else{let t=i(v).parent().parent().find(".label");t.length||(t=i(v).parent().parent().find("label")),t.length&&(vi_wpvs_frontend_param?.single_attr_selected_separator&&t.append('<span class="vi-wpvs-label-selected vi-wpvs-label-selected-separator">'+vi_wpvs_frontend_param.single_attr_selected_separator+"</span>"),t.append('<span class="vi-wpvs-label-selected vi-wpvs-label-selected-title">'+i(v).find(".vi-wpvs-option-wrap-selected").data("attribute_label")+"</span>"),t.css({display:"inline-flex",flexWrap:"wrap",alignItems:"center"}),t.find(" *").css({margin:"0"}),t.find(".vi-wpvs-label-selected-title").css({margin:"0 5px"}))}})},viwpvs_frontend.prototype.hide_variation=function(){let t=this.form,a=this.viwpvs_form_id,o=this;t.find(".reset_variations,.vi-wpvs-variation-wrap-option,.vi-wpvs-variation-style .vi-wpvs-label-selected").each(function(t,s){if(!o.is_item_in_form(s,a))return!0;i(s).addClass("vi-wpvs-hidden")}),t.find(".vi-wpvs-option-wrap").each(function(t,s){if(!o.is_item_in_form(s,a))return!0;i(s).removeClass("vi-wpvs-option-wrap-selected vi-wpvs-option-wrap-out-of-stock").addClass("vi-wpvs-option-wrap-default")}),t.find(".vi-wpvs-option-radio").each(function(t,s){if(!o.is_item_in_form(s,a))return!0;i(s).prop("checked",!1)}),t.find(".vi-wpvs-variation-button-select >span ").each(function(s,e){if(!o.is_item_in_form(e,a))return!0;i(e).html(t.find(".vi-wpvs-option-select:first-child").html())})},viwpvs_frontend.prototype.is_item_in_form=function(t,a){return!(!i(t).closest(".composited_product_details_wrapper").length||i(t).closest(".variations_form").data("viwpvs_form_id")!=a)||(!(!i(t).closest(".tc-epo-element-product-container").length||i(t).closest(".tc-epo-element-product-container").data("viwpvs_form_id")!=a)||(!i(t).closest(".vi_wpvs_variation_form").length||i(t).closest(".vi_wpvs_variation_form").data("viwpvs_form_id")==a)&&(!i(t).closest(".variations_form").length||i(t).closest(".variations_form").data("viwpvs_form_id")==a))},i.fn.viwpvs_woo_product_variation_swatches=function(){return new viwpvs_frontend(this),this},window.viwpvs_to_string=function(i){return i?i.toString():""}}(jQuery);